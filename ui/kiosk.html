<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DWL | KIOSK MODE 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;500;700&display=swap');
        body {
            font-family: 'Fira Code', monospace;
            background-color: #000;
            color: #00ff41; /* Classic Matrix/Terminal Green */
            overflow: hidden;
        }
        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(0, 255, 65, 0.1);
            position: absolute;
            animation: move 8s linear infinite;
        }
        @keyframes move {
            0% { top: 0; }
            100% { top: 100%; }
        }
        .glow { text-shadow: 0 0 10px #00ff41; }
        .border-neon { border: 1px solid #00ff41; box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
    </style>
</head>
<body class="p-8 relative">
    <div class="scanline"></div>

    <div class="flex justify-between items-end border-b-2 border-green-900 pb-4 mb-8">
        <div>
            <h1 class="text-4xl font-bold glow">SYSTEM: DATABASE-WORLD-LOG</h1>
            <p class="text-xl opacity-70">NODE_LOCATION: GLOBAL_HUB_2026</p>
        </div>
        <div class="text-right">
            <div id="clock" class="text-5xl font-bold">00:00:00</div>
            <p class="text-sm">SECURITY_LEVEL: ALPHA_ENCRYPTED</p>
        </div>
    </div>

    <div class="grid grid-cols-3 gap-8 h-[75vh]">
        
        <div class="space-y-6">
            <div class="border-neon p-6 bg-green-950/10">
                <h2 class="text-2xl font-bold mb-4 bg-green-900 text-black px-2 uppercase italic">Live World Stats</h2>
                <div class="space-y-4">
                    <div>
                        <p class="text-xs uppercase">Est. Global Population</p>
                        <p id="pop-val" class="text-4xl font-black text-white glow">SYNCING...</p>
                    </div>
                    <div>
                        <p class="text-xs uppercase">CO2 Emissions (Tons)</p>
                        <p id="co2-val" class="text-2xl font-bold text-red-500">---</p>
                    </div>
                </div>
            </div>
            
            <div class="border-neon p-6 bg-green-950/10 h-full">
                <h2 class="text-xl font-bold mb-4 opacity-80 underline">VALIDATION_LOGS</h2>
                <div id="logs" class="text-xs space-y-2 overflow-hidden">
                    <div class="text-yellow-500 italic">[SYSTEM] Initializing Kiosk Data Sync...</div>
                </div>
            </div>
        </div>

        <div class="col-span-2 space-y-8">
            <div class="border-neon p-10 flex items-center justify-center bg-green-900/5 h-2/3">
                <div class="text-center">
                    <p class="text-2xl uppercase tracking-[1em] mb-4">WEF 2026 Narrative</p>
                    <h3 class="text-7xl font-black text-white glow mb-6">"A SPIRIT OF DIALOGUE"</h3>
                    <div class="flex justify-around text-xl border-t border-green-900 pt-6">
                        <div>RISK: <span class="text-red-500">GEOECONOMIC</span></div>
                        <div>STATUS: <span class="text-blue-500">MONITORING</span></div>
                        <div>TREND: <span class="text-yellow-500">STABLE</span></div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-8 h-1/3">
                <div class="border-neon p-4 bg-slate-900/40">
                    <h4 class="text-sm font-bold border-b border-green-900 mb-2">FINANCIAL_INDEX_2026</h4>
                    <p class="text-3xl text-white font-bold">BTC: $142,500 <span class="text-green-500 text-sm">▲</span></p>
                    <p class="text-3xl text-white font-bold">GOLD: $2,840 <span class="text-green-500 text-sm">▲</span></p>
                </div>
                <div class="border-neon p-4 bg-slate-900/40">
                    <h4 class="text-sm font-bold border-b border-green-900 mb-2">ACADEMIC_RESEARCH_PULSE</h4>
                    <p class="text-lg">AI VALIDATION: <span class="text-white">ACTIVE</span></p>
                    <p class="text-lg">QUANTUM_NODES: <span class="text-white">8,402 ONLINE</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Fungsi Jam Masa-Nyata (UK Format)
        setInterval(() => {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB');
        }, 1000);

        // 2. Fungsi Utama: Kiosk Data Sync dari JSON Sebenar
        async function syncKioskData() {
            try {
                const response = await fetch('../data/logs/worldometer_live.json');
                
                if (!response.ok) {
                    addKioskLog("[WARN] Log file not found. Waiting for GitHub Action...");
                    return;
                }

                const data = await response.json();
                
                if (data && data.metrics) {
                    // Update Paparan Populasi
                    document.getElementById('pop-val').innerText = parseInt(data.metrics.current_population).toLocaleString();
                    
                    // Update Paparan CO2
                    if(data.metrics.co2_emissions_tons) {
                        document.getElementById('co2-val').innerText = parseInt(data.metrics.co2_emissions_tons).toLocaleString();
                    }

                    // Tambah Log Kejayaan
                    const timeOnly = data.timestamp.split('T')[1].split('.')[0];
                    addKioskLog(`[SUCCESS] Data Ingested: ${data.status} | TS: ${timeOnly}`);
                }
            } catch (e) {
                addKioskLog("[ERROR] Sync Failed. Check Repository Data Path.");
            }
        }

        // 3. Fungsi Log Scroller
        function addKioskLog(message) {
            const logsDiv = document.getElementById('logs');
            const entry = document.createElement('div');
            entry.className = "text-[10px] opacity-80 border-l border-green-900 pl-2";
            entry.innerText = `> [${new Date().toLocaleTimeString()}] ${message}`;
            
            logsDiv.prepend(entry);
            
            // Simpan hanya 10 log terakhir untuk kebersihan UI
            if (logsDiv.children.length > 10) {
                logsDiv.lastChild.remove();
            }
        }

        // Jalankan Sync Pertama & Ulangi Setiap 60 Saat
        syncKioskData();
        setInterval(syncKioskData, 60000);

        // Simulasi Log Aktiviti Tambahan (Supaya Kiosk Nampak 'Sibuk')
        const systemMessages = [
            "GDELT_API: Analyzing political sentiment...",
            "DB_WORLD_LOG: All nodes active.",
            "CORE_VALIDATOR: Integrity check passed.",
            "WEF_INTEL: Monitoring risk nodes..."
        ];

        setInterval(() => {
            const randomMsg = systemMessages[Math.floor(Math.random() * systemMessages.length)];
            addKioskLog(`[INFO] ${randomMsg}`);
        }, 8000);

    </script>
</body>
</html>
